# graphql/schema.graphql
directive @aws_subscribe(mutations: [String!]!) on FIELD_DEFINITION

type Order {
  id: String!
  orderCodeId: String!
  orderItems: [OrderItem!]!
  extraText: String!
}

type OrderItem {
  variantId: String!
  optionIds: [String!]!
  amount: Int!
}

input OrderInput {
  id: String!
  orderCodeId: String!
  orderItems: [OrderItemInput!]!
  extraText: String!
}

input OrderItemInput {
  variantId: String!
  optionIds: [String!]!
  amount: Int!
}

type Query {
  listOrders: [Order!]!
}

type Mutation {
  createOrder(order: OrderInput!): Order
}

type Subscription {
  onCreateOrder: Order @aws_subscribe(mutations: ["createOrder"])
}

schema {
  query: Query
  mutation: Mutation
  subscription: Subscription
}
